// VanillaTilt.js - Lightweight parallax tilt effect
// Source: https://micku7zu.github.io/vanilla-tilt.js/
(function(){
    "use strict";
    var VanillaTilt=function(e,t){
        if(!(this instanceof VanillaTilt))return new VanillaTilt(e,t);
        this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.event=null,this.updateBind=this.update.bind(this),this.resetBind=this.reset.bind(this),this.element=e,this.settings=this.extendSettings(t),this.reverse=this.settings.reverse?-1:1,this.glare=this.isSettingTrue(this.settings.glare),this.glarePrerender=this.isSettingTrue(this.settings['glare-prerender']),this.fullPageListening=this.isSettingTrue(this.settings['full-page-listening']),this.gyroscope=this.isSettingTrue(this.settings.gyroscope),this.glare&&this.prepareGlare(),this.addEventListeners(),this.updateInitialPosition()};
    VanillaTilt.prototype={extendSettings:function(e){var t={reverse:false,max:15,startX:0,startY:0,perspective:1000,scale:1,speed:400,transition:true,axis:null,glare:false,"max-glare":1,"glare-prerender":false,gyroscope:true,gyroscopeMinAngleX:-45,gyroscopeMaxAngleX:45,gyroscopeMinAngleY:-45,gyroscopeMaxAngleY:45};for(var i in e)t[i]=e[i];return t},isSettingTrue:function(e){return"string"==typeof e?"true"===e:e===!0},addEventListeners:function(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.onWindowResizeBind=this.onWindowResize.bind(this),this.onDeviceOrientationBind=this.onDeviceOrientation.bind(this),this.element.addEventListener("mouseenter",this.onMouseEnterBind),this.element.addEventListener("mousemove",this.onMouseMoveBind),this.element.addEventListener("mouseleave",this.onMouseLeaveBind),this.fullPageListening?window.addEventListener("resize",this.onWindowResizeBind):this.element.addEventListener("resize",this.onWindowResizeBind),this.gyroscope&&window.addEventListener("deviceorientation",this.onDeviceOrientationBind)},removeEventListeners:function(){this.element.removeEventListener("mouseenter",this.onMouseEnterBind),this.element.removeEventListener("mousemove",this.onMouseMoveBind),this.element.removeEventListener("mouseleave",this.onMouseLeaveBind),this.fullPageListening?window.removeEventListener("resize",this.onWindowResizeBind):this.element.removeEventListener("resize",this.onWindowResizeBind),this.gyroscope&&window.removeEventListener("deviceorientation",this.onDeviceOrientationBind)},destroy:function(){clearTimeout(this.transitionTimeout),null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.reset(),this.removeEventListeners(),this.element.vanillaTilt=null,delete this.element.vanillaTilt},onMouseEnter:function(e){this.updateElementPosition(),this.element.style.willChange="transform",this.setTransition()},onMouseMove:function(e){this.event=e,this.updateCall=requestAnimationFrame(this.updateBind)},onMouseLeave:function(e){this.setTransition(),this.settings.reset&&this.reset()},reset:function(){this.event={pageX:this.left+this.width/2,pageY:this.top+this.height/2},this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX(0deg) rotateY(0deg) scale("+this.settings.scale+")",this.glare&&(this.glareElement.style.transform="rotate(180deg) translate(-50%, -50%)",this.glareElement.style.opacity="0")},getValues:function(){var e,t;return this.fullPageListening?e=this.event.pageX/(window.innerWidth||document.documentElement.clientWidth)-.5:(e=(this.event.pageX-this.left)/this.width-.5),this.fullPageListening?t=this.event.pageY/(window.innerHeight||document.documentElement.clientHeight)-.5:(t=(this.event.pageY-this.top)/this.height-.5),{tiltX:(this.reverse*(this.settings.max*t)).toFixed(2),tiltY:(this.reverse*(this.settings.max*e)).toFixed(2),percentageX:100*e,percentageY:100*t}},updateElementPosition:function(){var e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top},update:function(){var e=this.getValues();this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+e.tiltX+"deg) rotateY("+e.tiltY+"deg) scale("+this.settings.scale+")",this.glare&&(this.glareElement.style.transform="rotate(180deg) translate(-50%, -50%) scale(1.5)",this.glareElement.style.opacity=""+(e.percentageY*this.settings['max-glare']/100)+"")},prepareGlare:function(){if(!this.glarePrerender){var e=document.createElement("div");e.classList.add("js-tilt-glare");var t=document.createElement("div");t.classList.add("js-tilt-glare-inner"),e.appendChild(t),this.element.appendChild(e)}this.glareElement=this.element.querySelector(".js-tilt-glare"),this.glareInnerElement=this.element.querySelector(".js-tilt-glare-inner"),this.glareElement.style.position="absolute",this.glareElement.style.top="0",this.glareElement.style.left="0",this.glareElement.style.width="100%",this.glareElement.style.height="100%",this.glareElement.style.pointerEvents="none",this.glareInnerElement.style.position="absolute",this.glareInnerElement.style.top="50%",this.glareInnerElement.style.left="50%",this.glareInnerElement.style.transform="translate(-50%, -50%) rotate(180deg)",this.glareInnerElement.style.width="100%",this.glareInnerElement.style.height="100%",this.glareInnerElement.style.background="linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,"+this.settings['max-glare']+".5) 100%)",this.glareInnerElement.style.opacity="0"},updateInitialPosition:function(){if(this.settings.startX||this.settings.startY){this.event={pageX:this.left+this.settings.startX,pageY:this.top+this.settings.startY};var e=this.getValues();this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+e.tiltX+"deg) rotateY("+e.tiltY+"deg) scale("+this.settings.scale+")"}},isSettingTrue:function(e){return"string"==typeof e?"true"===e:e===!0}},window.VanillaTilt=VanillaTilt;})();
